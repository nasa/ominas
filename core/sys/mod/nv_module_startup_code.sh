###############################################################################
# This code is added to the beginining of the ominas startup script.  
###############################################################################

#---------------------------------------------------------------------#
# run OMINAS startup code
#---------------------------------------------------------------------#
args+=$HOME/.ominas/ominas_startup.bat

#---------------------------------------------------------------------#
# parse arguments
#---------------------------------------------------------------------#
for arg in $@; do
 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 # ++<keyword>: pass through to OMINAS 
 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 if [[ $arg == ++* ]] ; then _args+=($arg)

 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 # --<keyword>: pass through to OMINAS 
 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 if [[ $arg == --* ]] ; then _args+=($arg)

 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 # <keyword>==<value>: pass through to OMINAS
 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 elif [[ $arg == *==* ]] ; then _args+=($arg)

 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 # ::<variable>: save the assignmentand set to 1 below
 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 elif [[ $arg == ::* ]] ; then _env=${arg:2:127}

 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 # :<variable>=<value>: make the assignemnt
 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 elif [[ $arg == :* ]] ; then export ${arg:1:127}

 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 # all other args added to the IDL argument list
 #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 else args+=($arg)
 fi
  #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
  # set saved variable to 1
  #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -#
 if [[ $_env != "" ]] ; 
  then 
    export ${_env}=1
  fi
done

#---------------------------------------------------------------------#
# add parsed arguments to the IDL argument list using "-args"
#---------------------------------------------------------------------#
args+=(\-args)
args+=(${_args[*]})

#---------------------------------------------------------------------#
# run the setup script
#---------------------------------------------------------------------#
. /home/spitale/.ominas/ominas_setup.sh







