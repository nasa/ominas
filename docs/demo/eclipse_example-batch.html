<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Wed Aug 29 20:18:20 2018 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>eclipse_example-batch.pro (OMINAS Documentation)</title>

    

    <script type="text/javascript" src="idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="idldoc-resources/js/copybutton.js"></script>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="eclipse_example-batch.pro (OMINAS Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">


    <div class="content">
      
      <h1 class="basename">eclipse_example-batch.pro<span class="file-attributes"></span></h1>
      

      <span class="file_attribute small">batch file</span>
      
      
      <br/>

      
      <div id="file_comments">
        <div class="small "><p>                            ECLIPSE EXAMPLE
</p>

<p>  Created by Joe Spitale
</p>

<p>  This example script demonstrates  OMINAS' rendering functionality using the
  2017 total Solar eclipse as an example.
</p>

<p>  This example file can be executed from the shell prompt in the ominas/demo
  directory using:
<div><div><code class="listing"></code></div></div>  	ominas eclipse_example-batch
</p>

<p>  or from within IDL using:
<div><div><code class="listing"></code></div></div>  	@eclipse_example-batch
 OBSERVATION PARAMETERS
</p>

<p>  Here we set basic parameters of the observation: start and stop times,
  number of time steps, name of instrument.  Note that the times could also
  be given numerically; UTC times are used for readability.  The
  interpretation of the times is performed by the translators (see next step):
<div><div><code class="listing"><code class="source"> instrument = 'CAS_ISS_NA'</code>
<code class="source"> times = ['2017-08-21T19:00:00','2017-08-21T20:00:00']</code>
<code class="source"> nt = 2</code>
</code></div></div></p>

<p> CONVERT TIMES
</p>

<p>  Times could be converted by directly calling procedures within the SPICE
  translator package, but we would like to avoid such explicitly application-
  specific code here.  Instead, we use PG_GET_PLANETS and assume (hope?)
  there is a translator that can interpret UTC times.  Once the start and
  stop times are converted to ET, the full time array is obtained using
  interpolation :
<div><div><code class="listing"><code class="source">  pds = pg_get_planets(time=times, name=['EARTH'])</code>
<code class="source">  t_start = bod_time(pds[0])</code>
<code class="source">  t_stop = bod_time(pds[1])</code>

<code class="source">  t = t_start</code>
<code class="source">  if(nt GT 1) then t = (dindgen(nt)/(nt-1) * (t_stop - t_start)) + t_start</code>
</code></div></div></p>

<p> CAMERA PARAMETERS
</p>

<p>  Camera descriptors are obtained for all times.  Note that, because there
  is no data descriptor, this call to PG_GET_CAMERAS creates one and returns
  it in the first argument. the position and pointing of the cameras will be
  changed in the next step:
<div><div><code class="listing"><code class="source">  cd = pg_get_cameras(instrument=instrument, time=times)</code>
</code></div></div></p>

<p> SET CAMERA POSITIONS AND POINTING
</p>

<p>  If left alone, the camera pointing and positions will be whatever was
  returned by the translators (in this case, wherever Cassini was and
  where it was pointed at the specified times).  Here we force the cameras to
  point at the center of the Earth (with the Y vector pointed to celestial
  north), and we place the camera along the Earth-Moon line at 8 times the
  Earth-Moon distance.  Note the use of the data descriptor created by
  PG_GET_CAMERAS:
<div><div><code class="listing"><code class="source">  pd0 = pg_get_planets(dd, od=cd, name='EARTH')</code>
<code class="source">  pd1 = pg_get_planets(dd, od=cd, name='MOON')</code>
<code class="source">  pg_reposition, bx=cd, bod_pos(pd0) + (bod_pos(pd1)-bod_pos(pd0))*, /absolute</code>
<code class="source">  pg_repoint, cd=cd, bod_pos(pd0)-bod_pos(cd), /north</code>
</code></div></div></p>

<p> VIEW RENDERED SCENES WITH GRIM
</p>

<p>  We input the camera descriptors to GRIM, but let it compute all other
  descriptors.  Planets are computed within 1 AU of the camera.  Note that
  the ordering of the initial overlays is intentional, causing the shadow
  to be computed for only the Moon's terminator before other overlays are
  computed.  /RENDER_AUTO causes all planes to be rendered intially, and
  upon any descriptor events, for example, as a result of using GRIM's
  NAVIGATE mode:
<div><div><code class="listing"><code class="source">  grim, dd, cd=cd, order=0, xsize=768, ysize=768, /activate, $</code>
<code class="source">         plt_distmax=const_get('AU'), $</code>
<code class="source">         over=['terminator:MOON', $</code>
<code class="source">               'shadow:MOON', $</code>
<code class="source">               'center', $</code>
<code class="source">               'limb:EARTH,MOON', $</code>
<code class="source">               'planet_grid:EARTH,MOON'], frame='limb', /render_auto</code>
</code></div></div>  Note that various renderng settings may be changed using options under
  View-&gt;Render.  A more realistic shadow may be obtained by modifying
  the NUMBRA value, though it will sow down the rendering significantly.
</p>

<p>         <img src="graphics/eclipse_example_1.png"/>
</p>

<p></p>

</div>
      </div>
      

      

      

      

      

      

      

      

      

      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Wed Aug 29 11:23:52 2018</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>22</td>
          </tr>

          
          <tr>
            <td class="name">Docformat:</td>
            <td>rst rst</td>
          </tr>
          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.6.1 on Wed Aug 29 20:18:20 2018</td>
          <td class="right"><a target="_top" href="http://github.com/mgalloy/idldoc">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>