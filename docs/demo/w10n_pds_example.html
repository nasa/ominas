<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Wed Aug 29 20:18:22 2018 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>w10n_pds_example.pro (OMINAS Documentation)</title>

    

    <script type="text/javascript" src="idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="idldoc-resources/js/copybutton.js"></script>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="w10n_pds_example.pro (OMINAS Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">


    <div class="content">
      
      <h1 class="basename">w10n_pds_example.pro<span class="file-attributes"></span></h1>
      

      <span class="file_attribute small">batch file</span>
      
      
      <br/>

      
      <div id="file_comments">
        <div class="small "><p>                              W10N_PDS EXAMPLE
</p>

<p>  Created by Vance Haemmerle from PG example
</p>

<p>   This example demonstrates various capabilities of W10N_PDS reading
   it gets the same image as the PG example but gets it from the PDS imaging website
</p>

<p>   This example file can be executed from the shell prompt in the ominas/demo
   directory using:
<div><div><code class="listing"><code class="source"> ominas w10n_pds_example.pro &lt;--cas&gt; &lt;--vgr&gt; &lt;--gll&gt; &lt;mission=={cas|vgr|gll}&gt;</code>

<code class="source">or from within an OMINAS IDL session using:</code>
</code></div></div><div><div><code class="listing"><code class="source">@w10n_pds_example</code>
</code></div></div> READ AND DISPLAY IMAGE
</p>

<p>   Missions supported CASSINI ISS, VGR ISS, GLL SSI
</p>

<p>   Use DAT_READ to read the image and then display the image using TVIM.
   With DAT_READ, it is not necessary to specify the file format.  DAT_READ
   uses your file type detectors to determine the format, and gets the
   appropriate reader from your I/O table.  DAT_READ returns a data
   descriptor (dd), which contains all of the data associated with the file.
   For convenience, it also returns the data array (im) and header (label)
   in its second and third arguments.
</p>

<p>   TVIM is called to display the image (im) in a new window with the y
   coordinate as top-down:
<div><div><code class="listing"><code class="source"> url = 'https://pds-imaging.jpl.nasa.gov/w10n/cassini/cassini_orbiter/coiss_1001/data/1350045294_1350147054/N1350122987_2.IMG'</code>
<code class="source"> dd = dat_read(url, im, label)</code>
<code class="source"> tvim, im, zoom=0.75, /order, /new</code>
</code></div></div></p>

<p> OBTAIN GEOMETRY
</p>

<p>   This section obtains the geometric information describing the scene.
   Note that there is no reference to the source of the this information.
   That is handled by the translator system, which is controlled by
   a series of translators tables telling OMINAS which translators to use
   for a given instrument.  The translators tables are parsed by DAT_READ,
   which stores the list of translators in the data descriptor.
</p>

<p>   If you are using the default demo configuration, then the geometry
   data are obtained via the NAIF/SPICE translator package and the detached
   header package.  The NAIF/SPICE translators use database files
   provided by NAIF or by individual projects.  The detached header
   translators read and write geometry descriptors in a text-based file
   that resides in the same directory as the data file and has the
   extension '.dh'.  Because the detached header translator dh_std_input
   appears before the Cassini Spice input translator in the default
   translators table, the descriptors are taken from the detached header
   if it exists, and if the relevant descriptors are present.  Otherwise,
   they are obtained from the SPICE kernels:
<div><div><code class="listing"><code class="source"> cd = pg_get_cameras(dd)                        ; CAMERA descriptor</code>
<code class="source"> pd = pg_get_planets(dd, od=cd, count=npd)      ; PLANET descriptor(s)</code>
<code class="source"> rd = pg_get_rings(dd, pd=pd, od=cd, count=nrd) ; RING descriptor(s)</code>
<code class="source"> ltd = pg_get_stars(dd, od=cd, name='SUN')     ; STAR descriptor for Sun</code>
</code></div></div>   The calls to PG_GET_PLANETS, PG_GET_RINGS, and PG_GET_STARS include
   an observer descriptor, od.  Without this, it would not be possible
   to perform aberration corrections on the returned objects.  In that
   case, the returned descriptors would represent the real states of the
   bodies at the time of observation at their respective positions rather
   than from the point of view of the observer:
<div><div><code class="listing"></code></div></div>   Note the 'name' keyword in the call to PG_GET_STARS. This is a CORE
   attribute, so it may be applied to any body.  For example, if you are
   only interested in Jupiter and the Galilean satellites, you could
   write:
<div><div><code class="listing"><code class="source"> pd = pg_get_planets(dd, od=cd, $</code>
<code class="source">          name=['JUPITER', 'IO', 'EUROPA', 'GANYMEDE', 'CALLISTO'])</code>
</code></div></div>   Instead, we just search the returned descriptors for the on named
   'JUPITER':
<div><div><code class="listing"><code class="source"> ii = where(cor_name(pd) EQ 'JUPITER')</code>
</code></div></div></p>

<p> MAKE A GENERIC DESCRIPTOR
</p>

<p>   Here we go with the generic descriptors again.  The story with these
   things is that long ago before GRIM was summoned from the lowest levels
   of heck, OMINAS (or MINAS, or NV) was purely command-based.  That's
   what you want because you can always build a GUI on top of it, but
   it doesn't really work to start with a graphical tool and try to
   build a command-based system out of that.  Therefore, I decided to have
   mercy on the poor jerks (mostly me up to now) who had to type (really
   paste) all of this nonsense in.  The generic descriptor was therefore
   spawned as a way to cut down on all the cd=this, pd=that, bx=whatever
   that tends to go on.  So we just shove it all into one structure and
   all of the PG programs know to look in there if one is given.  Any
   explicit descriptor arguments take precedence, though.  So if these
   things make you happy, then you're welcome.  I rarely use them in this
   way.  They live on because it turns out they have amazing utility in
   other ways.  So anyway, it's like this:
<div><div><code class="listing"><code class="source"> gd = {cd:cd, gbx:pd, dkx:rd, ltd:ltd}</code>
</code></div></div></p>

<p> COMPUTE OVERLAY ARRAYS
</p>

<p>   These commands compute the center, limb, and terminator of each planet,
   as well as the edges of the rings.  Note that the terminator is computed
   using PG_LIMB with the Sun as the observer:
<div><div><code class="listing"><code class="source"> limb_ptd = pg_limb(gd=gd) & pg_hide, limb_ptd, gd=gd, bx=rd, /rm</code>
<code class="source">           pg_hide, limb_ptd, /assoc, gd=gd, bx=pd, od=ltd</code>
<code class="source"> ring_ptd = pg_disk(gd=gd) & pg_hide, ring_ptd, gd=gd, bx=pd</code>
<code class="source"> term_ptd = pg_limb(gd=gd, od=gd.ltd) & pg_hide, term_ptd, gd=gd, bx=pd, /assoc</code>
<code class="source"> center_ptd = pg_center(gd=gd, bx=pd)</code>
</code></div></div></p>

<p> SET UP FOR PLOTTING
</p>

<p>  This just makes the calls to PG_DRAW a little easier, since they will
  need to be repeated every time we change things and recompute.  We put
  all of the POINT descriptors in one array and then make corresponding
  arrays for the plot parameters:
<div><div><code class="listing"><code class="source"> object_ptd = [center_ptd,limb_ptd,ring_ptd,term_ptd]</code>
<code class="source"> colors=[make_array(npd,value=!p.color), $</code>
<code class="source">         make_array(npd,value=ctyellow()), $</code>
<code class="source">         make_array(2*nrd,value=ctred()), $</code>
<code class="source">         make_array(npd,value=ctgreen())]</code>
<code class="source"> psyms=[make_array(npd,value=1), $</code>
<code class="source">        make_array(npd,value=3), $</code>
<code class="source">        make_array(2*nrd,value=3), $</code>
<code class="source">        make_array(npd,value=3)]</code>
<code class="source"> psizes=1.0</code>
<code class="source"> csizes=0.75</code>
<code class="source"> plabels=[cor_name(pd), $</code>
<code class="source">         make_array(npd,value=''), $</code>
<code class="source">         make_array(2*nrd,value=''), $</code>
<code class="source">         make_array(npd,value='')]</code>
</code></div></div></p>

<p> DRAW EVERYTHING
</p>

<p> Cassini result:
</p>

<p> <img src="graphics/jupiter_limb_initial.jpeg"/>
</p>

<p> Now we can do a nice simple call to PG_DRAW to draw everything:
<div><div><code class="listing"><code class="source">   pg_draw, object_ptd, $</code>
<code class="source">             col=colors, psy=psyms, psi=psizes, csi=csizes, pl=plabels</code>
</code></div></div> Voyager image:
</p>

<p> <img src="graphics/w10n_pds_vgr.png"/>
</p>

<p> Galileo result:
</p>

<p> <img src="graphics/w10n_pds_gll.png"/>
</p>

<p></p>

</div>
      </div>
      

      

      

      

      

      

      

      

      

      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Wed Aug 29 11:23:52 2018</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>52</td>
          </tr>

          
          <tr>
            <td class="name">Docformat:</td>
            <td>rst rst</td>
          </tr>
          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.6.1 on Wed Aug 29 20:18:22 2018</td>
          <td class="right"><a target="_top" href="http://github.com/mgalloy/idldoc">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>