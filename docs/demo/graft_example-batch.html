<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Wed Aug 29 20:18:21 2018 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>graft_example-batch.pro (OMINAS Documentation)</title>

    

    <script type="text/javascript" src="idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="idldoc-resources/js/copybutton.js"></script>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="graft_example-batch.pro (OMINAS Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">


    <div class="content">
      
      <h1 class="basename">graft_example-batch.pro<span class="file-attributes"></span></h1>
      

      <span class="file_attribute small">batch file</span>
      
      
      <br/>

      
      <div id="file_comments">
        <div class="small "><p>                            GRAFT EXAMPLE
</p>

<p>  Created by Joe Spitale
</p>

<p>  This example file demonstrates the use the GRIM interface programs
  GRIFT and GRAFT.  While GRIFT cheats GRIM out of its object references,
  GRAFT corruptly inserts (or grafts) data arrays into a GRIM instance.
</p>

<p>  The usage demonstrated here is a bit contrived, as one could accomplish
  a better result by specifying the desired overlays in the call to GRIM,
  as in grim_example, but let's live a little.
</p>

<p>  This example file can be executed from the shell prompt in the ominas/demo
  directory using:
<div><div><code class="listing"></code></div></div>  	ominas graft_example-batch
</p>

<p>  or from within IDL using:
<div><div><code class="listing"></code></div></div>  	@graft_example-batch
</p>

<p>  You can also just paste line-by-line if you want to inspect the variables
  at each step.
</p>

<p>  After the example stops, later code samples in this file may be executed by
  pasting them onto the IDL command line.
 READ AND DISPLAY IMAGE
</p>

<p>  Use GRIM to open and display an image:
<div><div><code class="listing"><code class="source"> grim, './data/n1350122987.2', zoom=0.75, /order</code>
</code></div></div></p>

<p> GRIFT
</p>

<p>  First, GRIFT the data descriptor out of poor old GRIM.  Note that the
  returned object is a reference to the same object as GRIM is using:
<div><div><code class="listing"><code class="source"> grift, dd=dd</code>
</code></div></div>  Be warned that GRIM jealously watches over its objects and updates whenever
  it detects any changes, so you can simultaneously operate on objects from
  within GRIM and from the command line.  For example, try:
<div><div><code class="listing"></code></div></div>	dat_set_data, dd, rotate(dat_data(dd),7)
</p>

<p>  GRIM resigns itself to having its data descriptor tampered with and
  updates the display accordingly.  Run the same command again if you
  want flip the image back.
</p>

<p> OBTAIN GEOMETRY
</p>

<p>  Now compute geometry for this dd.  This is the same business you have
  seen in all of the other demos, cd, pd, etc.  Of course, you could have
  just had GRIM do this:
<div><div><code class="listing"><code class="source"> cd = pg_get_cameras(dd, 'ck_in=auto')</code>
<code class="source"> pd = pg_get_planets(dd, od=cd, $</code>
<code class="source">        name=['JUPITER', 'IO', 'EUROPA', 'GANYMEDE', 'CALLISTO'])</code>
<code class="source"> rd = pg_get_rings(dd, pd=pd, od=cd)</code>
<code class="source"> ltd = pg_get_stars(dd, od=cd, name='SUN')</code>
</code></div></div></p>

<p> MAKE A GENERIC DESCRIPTOR
</p>

<p>  And of course we shove everything into a generic descriptor because it
  makes everything so much easier:
<div><div><code class="listing"><code class="source"> gd = {cd:cd, gbx:pd, dkx:rd, ltd:ltd}</code>
</code></div></div></p>

<p> COMPUTE OVERLAY ARRAYS
</p>

<p>  Same old story;  PG_LIMB, PG_DISK, PG_HIDE, etc.  GRIM would have been
  happy to do this for you:
<div><div><code class="listing"><code class="source"> limb_ptd = pg_limb(gd=gd) & pg_hide, limb_ptd, gd=gd, /rm, bx=rd</code>
<code class="source">           pg_hide, limb_ptd, /assoc, gd=gd, bx=pd, od=ltd</code>
<code class="source"> ring_ptd = pg_disk(gd=gd) & pg_hide, ring_ptd, gd=gd, bx=pd</code>
<code class="source"> term_ptd = pg_limb(gd=gd, od=gd.ltd) & pg_hide, term_ptd, gd=gd, bx=pd, /assoc</code>
<code class="source"> center_ptd = pg_center(gd=gd, bx=pd)</code>
</code></div></div></p>

<p> DISPLAY OVERLAYS
</p>

<p>  Ok, now let's draw those overlays, just like in the PG example.  This
  is going to be great:
<div><div><code class="listing"><code class="source"> pg_draw, center_ptd, col=ctwhite(), psym=1, plabel=cor_name(pd)</code>
<code class="source"> pg_draw, limb_ptd, col=ctyellow()</code>
<code class="source"> pg_draw, term_ptd, col=ctred()</code>
<code class="source"> pg_draw, ring_ptd, col=ctorange()</code>
</code></div></div>  Now let's zoom in and take a look at things.  You can use the mouse wheel
  with Ctrl depressed, or you can use one of the Zoom cursor modes, or you
  can use the View-&gt;Zoom menu, or the associated keyboard shortcuts if
  have your Xdefaults-grim installed; basically just throw a flip-flop at
  your computer and you should be able to make this happen.
</p>

<p>  But wait, where did my overlays go?  Did they ever even exist?  If you
  are older than two years of age and have mastered object permanence,
  then you probably have this one figured out.  We need a way to draw
  these things permanently; some way of GRAFTing them into GRIM...
</p>

<p> GRAFT
</p>

<p>  GRAFT "grafts" the POINT objects into GRIM.  Note that these are entered
  as user arrays in GRIM, so they're pretty much second class as far as
  GRIM is concerned.  This would have been way better if you had just
  specified these as overlays in your call to GRIM.  Now you have wasted
  your time and GRIM's.
</p>

<p>    graft, center_ptd, col=ctwhite(), psym=1;, plabel=cor_name(pd)
    graft, limb_ptd, col=ctyellow()
    graft, term_ptd, col=ctred()
    graft, ring_ptd, col=ctorange()
</p>

<p>  <img src="graphics/graft_example_01.png"/>
</p>

<p></p>

</div>
      </div>
      

      

      

      

      

      

      

      

      

      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Wed Aug 29 11:23:52 2018</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>23</td>
          </tr>

          
          <tr>
            <td class="name">Docformat:</td>
            <td>rst rst</td>
          </tr>
          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.6.1 on Wed Aug 29 20:18:21 2018</td>
          <td class="right"><a target="_top" href="http://github.com/mgalloy/idldoc">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>