<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Thu Dec 21 00:06:37 2017 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>grim.pro (OMINAS Documentation)</title>

    

    <script type="text/javascript" src="../idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="../idldoc-resources/js/copybutton.js"></script>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="grim.pro (OMINAS Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">


    <div class="content">
      
      <h2 class="directory">grim/</h2>
      
      <h1 class="basename">grim.pro<span class="file-attributes"></span></h1>
      

      
      
      
      <br/>

      

      

      

      

      

      
      <div>
        <h2>Routines</h2>
        

      

      

      
      </div>
      

      
      <div id="routine-details">
        

        
        <div class="routine-details details" id="grim_constants">
          <h2 class="routine-name"><a href="#root" class="top">top</a> grim_constants<span class="routine-attributes"></span></h2>

          

          
          <p class="syntax"><code>grim_constants</code></p>

          
          <div ><h1> GRIM</h1>

<p>      General-purpose GRaphical Interface for oMinas
</p>

<p> CATEGORY: NV/GR
</p>

<p> CALLING SEQUENCE:
<div><div><code class="listing"><code class="source">          grim, arg1, arg2</code>

</code></div></div></p>

<h2> ARGUMENTS:</h2>

<h3>  INPUT:</h3>

<p>      arg1, arg2:
</p>

<p>            Grim accepts up to two arguments, which can appear in either
            order.  Possible arguments are:
</p>

<p>                  data descriptors (object)
                  file specification (string)
                  grn (scalar)
                  plot (1d array)
                  image (2d array)
                  cube (3d array)
</p>

<p>      Plots are displayed as graphs whose abscissa are the array index, unless
      an abscissa is present in the data descriptor.  Many functions are not
      available in this mode.
</p>

<p>      Cubes are handled as multiple image planes unless /rgb is used
      (see below).  All grim planes will contain the same data array,
      but display only data ranges corresponding to one channel of the cube.
      For /rgb (assuming the cube has three channels), the data are placed
      on a single image plane with each cube channel assigned the R, G, or B
      color channel.
</p>

<h3>  OUTPUT:</h3>

<p>      None
</p>

<h2>  KEYWORDS:</h2>

<h3>   INPUT:</h3>

<h3>      Descriptor Keywords</h3>

<p>      The following inputs replace objects already maintained by GRIM.  They
      must be given as either a single element, which is applied to the
      current plane, or as an array with one element for each plane.
</p>

<p>      <a href="../grim/grim.html#grim_draw_vectors:p:cd"><code>cd</code></a>:  Replaces the current camera descriptor.  This may also be
              a map descriptor, in which case some of GRIM's functions
             will not be available.  When using a map descriptor instead
             of a camera descriptor, you can specify a camera descriptor
             as the observer descriptor (see the 'od' keyword below) and
             some additional geometry functions will be available.
</p>

<p>      <a href="../grim/grim.html#grim:k:od"><code>od</code></a>:  Replaces the current observer descriptor.  The observer
             descriptor is used to allow some geometry objects (limb,
             terminator) to be computed when using a map descriptor instead
             of a camera descriptor.
</p>

<p>      The following inputs replace or augment objects already maintained
      by GRIM.  They are sorted into their respective planes by comparing
      their internal generic descriptors with the data descriptor or
      observer descriptor (in the case of a map) for each plane.  Objects
      whose names match those already maintained by GRIM replace them.
</p>

<p>      <a href="../grim/grim.html#grim:k:ltd"><code>ltd</code></a>: Replaces the current light descriptor.
</p>

<p>      <a href="../grim/grim.html#grim:k:pd"><code>pd</code></a>:   Adds/replaces planet descriptors.
</p>

<p>      <a href="../grim/grim.html#grim:k:rd"><code>rd</code></a>:   Adds/replaces ring descriptors.
</p>

<p>      <a href="../grim/grim.html#grim:k:sd"><code>sd</code></a>:   Adds/replaces star descriptors.
</p>

<p>      <a href="../grim/grim.html#grim:k:std"><code>std</code></a>:  Adds/replaces station descriptors
</p>

<p>      <a href="../grim/grim.html#grim:k:ard"><code>ard</code></a>:  Adds/replaces array descriptors
</p>

<p>      <a href="../grim/grim.html#grim:k:gd"><code>gd</code></a>:   Generic descriptor containing some or all of the above
              descriptors.
</p>

<p>  <a href="../grim/grim.html#grim:k:assoc_xd"><code>assoc_xd</code></a>:
   If given, use these descriptors to sort descriptors into
   planes instead of matching the data descriptors or observer
   descriptors in their internal generic descriptors.
</p>

<h3>      Descriptor Select Keywords</h3>

<p>      Descriptor select keywords (see pg_get_*) are specified using the
      standard prefix corresponding to the descriptor type.  For example,
      the fov keyword to pg_get_planets would be given to grim as plt_fov.
</p>

<h3>      Initial Colormap Keywords</h3>

<p>      The colormap structure (see colormap_descriptor__define) can be
      be initialized via keywords prefied with 'cmd_', e.g., 'cmd_shade'.
      In addition, the following keywords apply to the initial color map:
</p>

<p>      <code>*auto_stretch</code>:
            If set, the color table for each plane is automatically
            stretched.  This is identical to using the 'Auto' button
            on on the grim color tool.
</p>

<h3>      Translator Keywords</h3>

<p>      The following keywords are passed directly to the translators, which
      are responsible for interpreting their meanings.
</p>

<p>      <code>*cam_trs</code>: String giving translator keywords for the camera descriptors.
</p>

<p>      <code>*lgt_trs</code>: String giving translator keywords for the light descriptors.
</p>

<p>      <code>*plt_trs</code>: String giving translator keywords for the planet descriptors.
</p>

<p>      <code>*rng_trs</code>: String giving translator keywords for the ring descriptors.
</p>

<p>      <code>*str_trs</code>: String giving translator keywords for the star descriptors.
</p>

<p>      <code>*stn_trs</code>: String giving translator keywords for the stations descriptors.
</p>

<p>      <code>*arr_trs</code>: String giving translator keywords for the array descriptors.
</p>

<h3>      TVIM Keywords</h3>

<p>      The following keywords set the initial viewing parameters and are
      simply passed to TVIM.
</p>

<p>      <code>*xsize</code>:  Size of the graphics window in the x direction.
</p>

<p>      <code>*ysize</code>:  Size of the graphics window in the y direction.
</p>

<p>      <a href="http://exelisvis.com/docs//CW_ZOOM.html"><code>*zoom</code></a>:   Initial zoom to be applied to the image.  If not given, grim
                 computes an initial zoom such that the entire image fits on the
                 screen.
</p>

<p>      <a href="http://exelisvis.com/docs//IROTATE.html"><code>*rotate</code></a>: Initial rotate value to be applied to the image (as in the IDL
                 ROTATE routine).  If not given, 0 is assumed.
</p>

<p>      <a href="http://exelisvis.com/docs//BYTEORDER.html"><code>*order</code></a>:  Initial display order to be applied to the image.
</p>

<p>      <a href="http://exelisvis.com/docs//EOS_GD_BLKSOMOFFSET.html"><code>*offset</code></a>: Initial offset (dx,dy) to be applied to the image.
</p>

<p>      <a href="../grim/grim.html#grim:k:doffset"><code>doffset</code></a>: Change the offset viewing parameter by this amount.
</p>

<p>      <a href="../grim/grim.html#grim:k:default"><code>default</code></a>: If set, use default tvim properties (zoom=[1,1], offset=[0,0]
                 order=0 [bottom-up])
</p>

<p>      <a href="../grim/grim.html#grim:k:previous"><code>previous</code></a>: If set, restore last-used tvim viewing parameters.
</p>

<p>      <a href="../grim/grim.html#grim:k:restore"><code>restore</code></a>: If set, use saved tvim viewing paramters.
</p>

<h3>      Customization Keywords</h3>

<p>      <code>*menu_extensions</code>:
            Array of strings giving the names of functions that return
            menu definitions, as defined by cw_pdmenu.  These menus are
            added to the built-in GRIM menus between the Overlays menu
            and the Help menu.  The default is 'grim_default_menus'.  If
            the first character in the first menu function is '+', then
            grim_default_menus is retained an the new menu are appended
            after that menu.  Otherwise, 'grim_default_menus' is replaced.
</p>

<p>      <code>*button_extensions</code>:
            Array of strings giving the names of definition functions
            for custom cursor modes to be added after the built-in
            cursor modes.  The definition function takes one argument
            (see arg_extensions below) and returns a grim_user_mode_struct.
</p>

<p>      <code>*arg_extensions</code>:
            Argument to be provided to the button extension definition
            function above.
</p>

<p>      <code>*menu_fname</code>:
            Name of a file containing additional menus to add to
            the grim widget.  The file syntax follows that for cw_pdmenu.
</p>

<h3>      Other Keywords</h3>

<p>      <code>*extensions</code>:
               String array giving extensions to try for each input file.
               see dat_read.
</p>

<p>      <a href="http://exelisvis.com/docs//_RNEW.html"><code>*new</code></a>:  If set, a new grim instance is created and all keywords apply
               to that instance.
</p>

<p>      <a href="../grim/grim_image_include.html#grim_display_plot:k:erase"><code>erase</code></a>: If set, erase the current image before doing anything else.
</p>

<p>      <code>*mode_init</code>:
               Initial cursor mode.  See below.
</p>

<p>      <code>*mode_args</code>:
               Array giving arguments for the cursor modes initialization
               functions.  If a string, then syntax is NAME:ARG, where NAME
               is the name of the cursor mode, and ARG is the argument for
               that mode.  For example:
<div><div><code class="listing"><code class="source">  mode_args='READOUT:myreadout_fn'</code>
</code></div></div>               would cause the function 'myreadout_fn' to be added to
               the list of functions called by pg_cursor and pg_measure
               via the readout cursor mode.  If not a string, the argument
               is passed to the initialization function with no processing.
</p>

<p>      <code>*retain</code>:
               Retain settings for backing store (see "backing store" in
               the IDL reference guide).  Defaults to 2.
</p>

<p>      <a href="http://exelisvis.com/docs//MESH_CLIP.html"><code>*clip</code></a>: Controls the number of fields of view in which overlays are
               computed.
</p>

<p>      <code>*fov</code>:  Controls the number of fields of view in which to request
               planet, ring and star descriptors.  Values are as follows:
</p>

<p>                   0 : get all descriptors
                  &lt;0 : relative to viewport
                  &gt;0 : relative to image / optic axis
</p>

<p>               Note that fov &gt; 0 is the same as setting the fov descriptor
               select keywords (see above).  Default is 0, but stars operate
               best when fov &gt; 0.
</p>

<p>      <a href="http://exelisvis.com/docs//STRUCT_HIDE.html"><code>*hide</code></a>: If set, overlays are hidden w.r.t shadows and obstructions.
               Default is on.
</p>

<p>      <a href="../grim/grim.html#grim:k:no_erase"><code>no_erase</code></a>:
               If set, GRIM does not erase the draw windoww.
</p>

<p>      <a href="../grim/grim.html#grim:k:no_refresh"><code>no_refresh</code></a>:
               If set, grim does not refresh.
</p>

<p>      <code>*rgb</code>:  If set, grim interprets a 3-plane cube as a 3-channel color image
               to be displayed on a single plane.
</p>

<p>      <code>*channel</code>:
               Array of bitmasks specifying the color channel in which to
               display each given image: 1b, 2b, or 4b.
</p>

<p>      <code>*visibility</code>:
               Initial visibility setting for planes:
</p>

<p>                  0: Only the current plane is drawn.
                  1: All planes are drawn.
</p>

<p>               Default is 0.
</p>

<p>      <a href="http://exelisvis.com/docs//MAX.html"><code>*max</code></a>:  Maximum data value to scale to when displaying images.
               Values larger than this are set to the maximum color table
               index.  If not set, the maximum value in the data set is used.
               In cases where the data array is being subsampled, this value
               may not be known, resulting in varying image scaling as more
               and more data values are sampled.  That problem may be
               eliminated via this keyword.
</p>

<p>      <a href="../grim/grim.html#grim:k:exit"><code>exit</code></a>:  If set, GRIM immediately exits.  This can be used to kill an
               existing GRIM window.
</p>

<p>      <a href="../grim/grim.html#grim:k:modal"><code>modal</code></a>: If set, grim is run as a modal widget, i.e., there is no command
               prompt.
</p>

<p>      <code>*frame</code>:If set, the initial view is set such that all members of the
               named overlay types are are visible.  If /frame, then all
               overlays are framed.  Note that object types that rely on the
               view to determine which objects to compute (e.g., stars)
               cannot be framed in this way.
</p>

<p>      <a href="../grim/grim.html#grim:k:refresh_callbacks"><code>refresh_callbacks</code></a>:
               Array of strings giving the names of procedures to be
               called after each refresh.  See CALLBACK PROCEDURES
               below.  Refresh callbacks receive only the data argument.
</p>

<p>      <a href="../grim/grim.html#grim:k:refresh_callback_data_ps"><code>refresh_callback_data_ps</code></a>:
               Array of pointers (one per callback) to data for the refresh
               callback procedures specified using the refresh_callbacks
               keyword.  See CALLBACK PROCEDURES below.
</p>

<p>      <a href="../grim/grim.html#grim:k:plane_callbacks"><code>plane_callbacks</code></a>:
               Array of strings giving the names of procedures to be
               called after each plane change.  See CALLBACK PROCEDURES
               below.  Plane callbacks receive only the data argument.
</p>

<p>      <a href="../grim/grim.html#grim:k:plane_callback_data_ps"><code>plane_callback_data_ps</code></a>:
               Array of pointers (one per callback) to data for the plane
               callback procedures specified using the plane_callbacks
               keyword.  See CALLBACK PROCEDURES below.
</p>

<p>      <code>*nhist</code>:History setting to be applied to data decriptor (see
               ominas_data__define).  GRIM uses data descriptor history to
               undo changes to the data array.  If nhist is not set, or is
               equal to 1, the undo menu option will not function.
</p>

<p>      <code>*maintain</code>:
               If given, this maintainance setting is applied to the data
               descriptor (see ominas_data__define).
</p>

<p>      <a href="http://exelisvis.com/docs//HDF_GR_SETCOMPRESS.html"><code>*compress</code></a>:
               Compression setting to be applied to data decriptor (see
               ominas_data__define).
</p>

<p>      <a href="http://exelisvis.com/docs//BANDPASS_FILTER.html"><code>*filter</code></a>:
               Initial filter to use when loading or browsing files.
</p>

<p>      <code>*load_path</code>:
               Initial path for the file loading dialog.
</p>

<p>      <code>*save_path</code>:
               Initial path for the file saving dialog.
</p>

<p>      <a href="http://exelisvis.com/docs//EXPAND_PATH.html"><code>*path</code></a>:  Sets both load_path and save_path to this value.
</p>

<p>      <code>*workdir</code>:
               Default directory for saving user points, masks, tie
               points, curves
</p>

<p>      <a href="../grim/grim.html#grim:k:user_psym"><code>user_psym</code></a>:
               Default plotting symbol for user overlays.
</p>

<p>      <a href="../grim/grim.html#grim_get_arg:k:grn"><code>grn</code></a>:   Identifies a specific GRIM window by number.  Grim numbers are
               displayed in the status bar, e.g.: grim &lt;grn&gt;.
</p>

<p>      <a href="../grim/grim.html#grim:k:pn"><code>pn</code></a>:    Directs GRIM to change to the plane corresponding to this plane
               number.
</p>

<p>      <code>*cursor_swap</code>:
               If set, cursor bitmaps are byte-order swapped.
</p>

<p>      <code>*loadct</code>:
               Index of color table to load.
</p>

<p>      <a href="http://exelisvis.com/docs//BETA.html"><code>*beta</code></a>: If set beta features are enabled.
</p>

<p>      <a href="http://exelisvis.com/docs//H5S_GET_SELECT_NPOINTS.html"><code>*npoints</code></a>:
               Number of point to compute for various overlays.  Default is 1000.
</p>

<p>      <code>*plane_syncing</code>:
               Turns plane syncing on (1) or off(0).  Default is 0.
</p>

<p>      <code>*tiepoint_syncing</code>:
               Turns tiepoint syncing on (1) or off(0).  Default is 0.
</p>

<p>      <code>*curve_syncing</code>:
               Turns curve syncing on (1) or off(0).  Default is 0.
</p>

<p>      <a href="../grim/grim.html#grim:k:position"><code>position</code></a>:
               Sets the plot position; see the POSITION grahics keyword.
</p>

<p>      <a href="../grim/grim.html#grim:k:color"><code>color</code></a>: Sets the line color index for plots.  One element per plane.
</p>

<p>      <a href="../grim/grim.html#grim:k:xrange"><code>xrange</code></a>:Sets the X-axis range for plots.
</p>

<p>      <a href="../grim/grim.html#grim:k:yrange"><code>yrange</code></a>:Sets the Y-axis range for plots.
</p>

<p>      <a href="../grim/grim.html#grim:k:thick"><code>thick</code></a>: Sets the line thickness for plots.  One element per plane.
</p>

<p>      <a href="../grim/grim.html#grim:k:title"><code>title</code></a>: For plots, sets the plot title for plots; one element per plane.
               For images, sets the base default title.
</p>

<p>      <a href="../grim/grim.html#grim:k:xtitle"><code>xtitle</code></a>:Sets the X-axis label for plots.  One element per plane.
</p>

<p>      <a href="../grim/grim.html#grim:k:ytitle"><code>ytitle</code></a>:Sets the Y-axis label for plots.  One element per plane.
</p>

<p>      <a href="../grim/grim.html#grim:k:psym"><code>psym</code></a>:  Sets the plotting symbol for plots.  One element per plane.
</p>

<p>      <a href="../grim/grim.html#grim:k:nsum"><code>nsum</code></a>:  See OPLOT.  One element per plane.
</p>

<p>      <code>*lights</code>:
               List of bodies to use as light sources.  Default is 'SUN'.
</p>

<p>      <code>*overlays</code>:
               List of initial overlays to compute on startup.  Each element
               is of the form:
<div><div><code class="listing"><code class="source">          type[:name1,name2,...]</code>
</code></div></div>               where 'type' is one of {limb, terminator, center,
               star, ring, planet_grid, array, station, shadow, reflection}
               and the names identify the name of the desired object.  Note
               that grim will load more objects than named if required by another
               startup overlay.  For example:
<div><div><code class="listing"><code class="source">        overlays='ring:a_ring'</code>
</code></div></div>               will cause only one ring descriptor to load, whereas:
<div><div><code class="listing"><code class="source">        overlays=['limb:saturn', 'ring:a_ring']</code>
</code></div></div>               will cause all of Saturn's rings to load because they are
               required in computing the limb points (for hiding).
</p>

<p>               Different results may be obtained using translator keywords,
               because those keywords are evaluated at the translator level.
               For example:
<div><div><code class="listing"><code class="source">        overlays='ring:fn54'</code>
</code></div></div>               may result in no ring, while:
<div><div><code class="listing"><code class="source">        overlays='ring', trs_rd='name=fn54'</code>
</code></div></div>               would be more likely to yield a ring.  In the former example,
               the specified name is compared against whatever default ring
               descriptors are returned by the tranlators, while in the latter
               case, the 'name' translator keyword is compared against all
               rings available to the translator.
</p>

<p>               Also note that the ordering is significant.  For example:
</p>

<p>                        overlays=['planet_grid:EARTH,MOON', $
                                  'terminator:MOON', $
                                  'shadow:MOON']
</p>

<p>		produces a different result than:
</p>

<p>                        overlays=['terminator:MOON', $
                                  'shadow:MOON'
                                  'planet_grid:EARTH,MOON']
</p>

<p>      <code>*delay_overlays</code>:
               If set, initial overlays (see 'overlays' above) are not computed
               until the first time they are accessed.  This option can greatly
               improve performance in cases where a large number of image planes
               are loaded with initial overlays, particularly if it is not
               expected that all planes will necesarily be viewed or otherwise
               accessed.  Typically this option will cause overlays to be
               computed only for the initially visible planes, with other
               planes loading overlays only as they are made visible.  However,
               there may be other cirumstances that can cause initial overlays
               to be loaded without actually viewing a plane.
</p>

<p>      <code>*activate</code>:
               If set, inital overlay are activated.
</p>

<p>      <code>*ndd</code>:  Sets the global ndd value in the OMINAS sate structure, which
               controls the maximum number of data descriptors with maintain == 1
               to keep in memory at any given time
</p>

<p>      <code>*render_sampling</code>:
               Over-sampling value for rendering.
</p>

<p>      <code>*render_numbra</code>:
               Number of random rays to trace to light sources when rendering.
</p>

<p>      <code>*render_minimum</code>:
               Minimum value (percent) to assign to photometric output in
               renderings.
</p>

<p>      <code>*render_rgb</code>:
               If set, renderings are done in color if the source has color
		color planes.  Default is off.
</p>

<p>      <code>*render_current</code>:
               If set, the rendering source is the image on this plane rather
		a map.  Default is off.
</p>

<p>      <code>*render_spawn</code>:
               If set, renderings from an image (as opposed to a rendering) are
		placed on a new plane.  Default is on, except for rendering planes.
</p>

<p>      <code>*render_sky</code>:
               If set, the sky is included in the rendering.  Default is off.
</p>

<p>      <code>*render_auto</code>:
               If set, automatically render whenever there is an object event.
               Default is off, though note that rendering planes always
		automatically re-render.
</p>

<p>      <code>*rendering</code>:
               If set, perform a rendering on the initial descriptor set.
		(not yet implemented)
</p>

<h2>  OUTPUT:</h2>

<p>      None
</p>

<h2>  Resource File</h2>

<p>       The keywords marked above with an asterisk may be overridden using
       the file $HOME/.ominas/grimrc.  Keyword=value pairs may be entered, one per
       line, using the same syntax as if the keyword were entered on the IDL
       command line to invoke grim.  Lines beginning with '#' are ignored.
       Keywords entered in the resource file override the default values, and
       are themselves overridden by keywords entered on the command line.
</p>

<h2>  Shell Interface</h2>

<p>       The <a href="../grim/grim.html#grim"><code>grim</code></a> alias may be used to start grim from the shell prompt
       via the XIDL interface.  The shell interface accepts all keywords
       marked above with an asterisk.  See grim.bat.
</p>

<p>       Example (assuming the grim alias described in grim.bat):
<div><div><code class="listing"><code class="source">    % grim -beta data/*.img overlay=center,limb:JUPITER</code>

</code></div></div>       Grim currently defines no environment variables..
</p>

<h2>  Environment Variables</h2>

<h2>  Common Blocks</h2>

<p>        grim_block:
         Keeps track of most recent grim instance and which ones are
         selected.
</p>

<h2>  Side Effects</h2>

<p>       Grim operates directly on the memory images of the descriptors that
       it is given.  Therefore, those descriptors are modified during
       a session.  This architecture allows data to be operated on concurrently
       through grim and from the command line; see grift.pro for details.
</p>

<h2>  Layout</h2>

<p>       The philosphy that drives GRIM's layout is that the maximum possible
       screen space should be devoted to displaying the data.  This policy
       allows for many GRIM windows to be used simultaneously without being
       obscured by crazy control panels full of buttons, gadgets, widgets,
       doodads, whirly-gigs, and what-nots.  The grim layout consists of the
       following items:
</p>

<h3>            Title bar</h3>

<p>               The title bar displays the grim window number (grn),
               the current plane number (pn), the total number of planes, the
               name field of the data descriptor for the current plane, the
               default title (if given; see the title keyword above), and
               a string indicating which RGB channels are associated with the
               current plane.
</p>

<h3>            Menu bar</h3>

<p>               Most of grim's functionality is accessed through the
               system of pulldown menus at the top.  Individual menu
               items are described in their own sections.
</p>

<h3>            Shortcut buttons</h3>

<p>               Some commonly used menu options are duplicated as shortcut
               buttons arranged horizontally just beneath the menu bar.  The
               function of each button is displayed in the status bar (see
               below) when the mouse cursor is hovered ove the button.
</p>

<h3>      Cursor mode buttons</h3>

<p>               Cursor mode shortcut buttons are arranged vertically along the
               left side of the GRIM window, and as provided as shortcuts
               for the corresponding options in the Mode menu.  The following
               modes are available:
</p>

<p>                  Activate:
                       In activate mode, overlay objects may be activated
                       or deactivated by clicking and/or dragging using the
                       left or right mouse buttons respectively.  This
                       activation mechanism allows the user to select which
                       among a certain type of objects should be used in a
                       given menu selection.  A left click on an overlay
                       activates that overlay and a right click deactivates
                       it.  A double click activates or deactivates all
                       overlays associated with a given descriptor, or all
                       stars.  Active overlays appear in the colors selected
                       in the 'Overlay Settings' menu selection.  Inactive
                       overlays appear in cyan.  A descriptor is active
                       whenever any of its overlays are active.
</p>

<p>                  Zoom:The zoom button puts grim in a zoom cursor mode, wherein
                       the image zoom and offset are controlled by selecting
                       a box in the image.  When the box is created using the
                       left mouse button, zoom and offset are changed so that
                       the contents of the box best fill the current graphics
                       window.  When the right button is used, the contents of
                       the current graphics window are shrunken so as to best
                       fill the box.  In other words, the left button zooms in
                       and the right button zooms out.
</p>

<p>                  Pan: The pan button puts grim in a pan cursor mode, wherein the
                       image offset is controlled by selecting an offset vector
                       using the left mouse button.  The middle button may be
                       used to center the image on a selected point.
</p>

<p>                  Pixel Readout:
                       In pixel readout mode, a text window appears
                       and displays data about the pixel selected
                       using the left mouse button.
</p>

<p>                  Tiepoint:
                       In tiepoint mode, tiepoints are added using the
                       left mouse button and deleted using the right button.
                       Tiepoints appear as crosses identified by numbers.
                       The use of tiepoints is determined by the particular
                       option selected by the user.
</p>

<p>                  Curve:
                       In curve mode, curves are added using the
                       left mouse button and deleted using the right button.
                       Curves appear as red lines identified by numbers at
                       each end.  The use of curves is determined by the
                       particular option selected by the user.
</p>

<p>                  Mask:GRIM maintains a mask for each plane whose use is
                       appication-dependent.  Mask mode allows pixels in the
                       mask to be toggled on and off.
</p>

<p>                  Magnify:
                       In magnify mode, image pixels in the graphics
                       window may be magnifed using either the right or left
                       mouse buttons.  The left button magnifies the displayed
                       pixels, directly from the graphics window.  The right
                       button magnifies the data itself, without the overlays.
</p>

<p>                  XY Zoom:
                       Same as 'zoom' above, except the aspect ratio is
                       set by the proportions of the selected box.
</p>

<p>                  Remove overlays:
                       Allows the user to remove overlay arrays.
</p>

<p>                  Trim overlays:
                       Allows the user to trim points from overlay arrays.
</p>

<p>                  Select within overlays:
                       Allows the user to select points within overlay arrays.
</p>

<p>                  Define Region:
                       Allows the user to define GRIM's region of interest.
</p>

<p>                  Smooth:
                       Allows the user to select a smoothing box to be applied
                       to the data array.
</p>

<p>                  Select Plane:
                       Allows the user to change planes using the pointer.
                       This option is only useful in cases where multiple
                       planes are displayed.
</p>

<p>                  Drag Image:
                       Allows the user to reposition the current plane by
                       clicking and dragging.
</p>

<p>                  Navigate:
                       Allows the user to modify the camera position and
                       orientation using the mouse.
</p>

<p>                  Target:
                       Allows the user to re-target the camera by clicking.
</p>

<h3>            Graphics window</h3>

<p>               The graphics window displays the data associated with the
               given data descriptor using the current zoom, offset, and
               display order.  The edges of an image are indicated by a dotted
               line.  The camera optic axis is indicated by a large red cross.
</p>

<h3>            Pixel readout</h3>

<p>               The cursor position and corresponding data value are are
               displayed beneath the graphics window, next to the message line.
</p>

<h3>            Message line</h3>

<p>               The message line displays short messages pertaining GRIM's
                current state, or displayng button functions.
</p>

<h2>  Callback Procedures</h2>

<p>       GRIM callback procedures are called with one or two arguments:
       the first argument is a pointer to data that was provided
       when the callback was added.  The second argument, if present, depends
       on the applicatation.
</p>

<h2>  Resource Names</h2>

<p>       The following X-windows resource names apply to grim:
</p>

<p>        grim_base:   top level base
        grim_mbar:   menu bar
        grim_shortcuts_base: base containing shortcut buttons
        grim_modes_base: base containing modes buttons
        grim_draw:   grim draw widget
        grim_label:    grim bottom label widget
</p>

<p>       To turn off the confusing higlight box around the modes buttons,
       put the following line in your ~/.Xdefaults file:
<div><div><code class="listing"><code class="source">    Idl*grim_modes_base*highlightThickness:  0</code>

</code></div></div>       GRIM displays 1-, 2-, and 3-dimensional data sets.  1-dimensional
       data arrays are displayed as plots.  In that case, the abscissa is
       the sample number unless the data descriptor contains an abscissa.
       2- and 3-dimensional arrays are displaye as image planes.  The only
       difference between images and cubes in GRIM is that images planes
       each have their own data descriptor, while cubes are represented by
       multiple image planes that share a common data descriptor; each plane
       in a cube corresponds to a unique offset in the data array stored in
       the common data descriptor.  Some functionality is not available when
       working with plots.  In that case, those options do not appear in the
       menus.
</p>

<h2>  Operation</h2>

<p>       GRIM requests only the data samples needed for the current viewing
       parameters.  Therefore, GRIM can display data sets of arbitrary size
       when used with a file reader that supports subsampling.  However, note
       that specific menu options may request the entire data array, depending
       on the application.
</p>

<p>       Each GRIM window may contain any number of planes as well as
       associated geometric data (i.e. object descriptors) and overlay arrays
       for displaying various geometric objects -- limbs, rings, stars, etc.
       An array of user overlay points is maintained to be used for application-
       specific purposes.  Generally, a set of overlay points or a descriptor
       must be activated in order to be used as input to a menu item; see
       activate mode above.
</p>

<p>       There are exclusive and non-exclusive mechanisms for selecting grim
       windows.  Grim windows may be non-exclusively selected using the select
       mode button mentioned above (upper-left corner).  The exclusive
       selection mechanism consists of a "primary" GRIM window, indicated by
       a red outline in the graphics window.  The primary selection is
       changed by pressing any mode or shortcut button, or by clicking in
       the graphics area of the desired grim window.  The meaning of the
       various selections depends on the application.
</p>

<p>       The functions of the left and right mouse buttons are determined by the
       cursor mode; some cursor modes define modifier keys to broaden the number
       of functions available in that mode.  The middle mouse button toggles
       the activation state of overlay arrays, or pans the image if no overlay
       appears beneath the cursor.  The mouse wheel cycles among cursor modes,
       or zooms about the cursor position if the control key is held down.
</p>

<p>       Objects maintained by GRIM are accessible via the grift interface,
       for example:
<div><div><code class="listing">    <span class="code-prompt">IDL&gt;</span> grift, dd=dd, cd=cd, pd=pd, limb_ptd=limb_ptd
</code></div></div>       returns the data desciptor, camera descriptor, planet descriptors,
       and limb points associated with the current plane.
</p>

<p>       GRIM registers event handlers for all of its objects, so the window
       is updated any time an object is modifed, whether by GRIM or by some
       other program, or from the command line.
</p>

<p></p>

</div>
          

          

          

          

          
          <h3>Examples</h3>
          <div><p>            (1) To create a new grim instance with no data:
<div><div><code class="listing">     <span class="code-prompt">IDL&gt;</span> grim, /new
</code></div></div>            (2) To create a new grim instance with data from a file of name
                "filename":
<div><div><code class="listing"> <span class="code-prompt">IDL&gt;</span> dd = dat_read(filename)
 <span class="code-prompt">IDL&gt;</span> grim, dd

<code class="source">       or:</code>
</code></div></div><div><div><code class="listing"></code></div></div>                  IDL&gt; grim, filename
</p>

<p>            (3) To give an existing grim instance a new camera descriptor:
<div><div><code class="listing">     <span class="code-prompt">IDL&gt;</span> grim, cd=cd

</code></div></div>       Window resizing is not precise.  GRIM tries to resize to the selected
       size, but typically overshoots.  This is probably platform-dependent.
</p>

<h2>  Known bugs</h2>

<p>       Objects inherited by rendering planes do not respond to events.
</p>

<p>       Image shifting:
        -  Descriptors not updated if shift performed form another window
           because the there's no way for the irst window to know to
           update its descriptors
              - fix wrap-around; clip instead
</p>

<p>       Plane-&gt;Coregister does not update descriptors
</p>

<p>       Navigate mode gets weird when you do certain modifer key presses
          --&gt; maybe a conflict with &lt;ctrl&gt; wheel zoom action
</p>

<p>       Crashes occur with File-&gt;Close
</p>

<p>       /no_erase is not enabled for images, just plots.  Probably should fix
       that.
</p>

<p>       Initial visibility setting does not seem to work until applied
       using plane settings window.
</p>

<p>       /frame causes a crash if there are no initial overlays.
</p>

<p>       It's not clear whether the symsize keyword is actually used.
</p>

<p>       pn keyword does not function.
</p>

<p>       Crash when tiepoint syncing is on and tiepoint selected with
       multiple planes.
</p>

<p>       Title keyword does not properly map multiple elements to multiple
       planes.
</p>

<p>       Nsum keyword does not properly map multiple elements to multiple
       planes.
</p>

<p>       Plane syncing appears to be incomplete and I don't remember what it
       was supposed to be.  I'm sure it was awesome, though.
</p>

<p>       Not sure what slave_overlays keyword does, or was supposed to do.
</p>

<p>       Overlays on rendered planes do not respond to events
</p>

<p>       Menu toggles don't update propoerly in some circumsumstances.
</p>

<p>       grim_message sometimes pops up messages from nv_message, which can
       be pretty obnxious.  This probably has to do with the calls to
       grim_message in grim_compute.include
</p>

<p>       Overlay point selections are not retained after recomputing
</p>

<p>       Undo does not seem to be working reliably
</p>

<p>       Events on overlays copied to rendering planes do not function
</p>

<p>       The help menu is currently not working because it relied on the old
       documentation system.
</p>

<p>       Navigation mode control is poor for the Shift-Right motion.
</p>

<p>	Target mode flips the camera orientation in the X direction.
</p>

<p>	File-&gt; Save Postscript doesn't work right: the image order is
	sometimes wrong, and the overlays don't line up
</p>

<h2>  SEE ALSO</h2>

<p>       <a href="../grim/interface/grift.html#grift"><code>GRIFT</code></a>, <a href="../grim/interface/graft.html#graft"><code>GRAFT</code></a>
</p>

<p></p>

</div>
          

          
          <h3>Author information</h3>

            <dl class="attribute small" summary="Routine author information">
              

              

              
                <dt>History:</dt>
                <dd><p>   Written by: Spitale 7/2002
</p>

<p></p>

</dd>
              

              
            </dl>
          

          

          
          <h3>Statistics</h3>

            <table class="attribute small" summary="Routine statistics">
              <tr>
                <td class="name">Lines:</td>
                <td><div class="box green"></div> 12 lines</td>
              </tr>

              <tr>
                <td class="name">Cyclomatic complexity:</td>
                <td><div class="box green"></div> 1</td>
                <tr>
                  <td class="name">Modified cyclomatic complexity:</td>
                  <td><div class="box green"></div> 1</td>
              </tr>
            </table>
          
          
        </div>
        

      </div>
      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Wed Dec 20 13:48:33 2017</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>1,912</td>
          </tr>

          
          <tr>
            <td class="name">Docformat:</td>
            <td>rst rst</td>
          </tr>
          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.6.1 on Thu Dec 21 00:06:37 2017</td>
          <td class="right"><a target="_top" href="http://github.com/mgalloy/idldoc">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>